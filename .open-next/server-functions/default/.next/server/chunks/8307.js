"use strict";exports.id=8307,exports.ids=[8307],exports.modules={76224:(e,s,r)=>{r.d(s,{Z:()=>t});var a=r(10326);let t=({label:e,type:s="text",register:r,name:t,defaultValue:i,error:n,hidden:o,inputProps:l})=>(0,a.jsxs)("div",{className:o?"hidden":"flex flex-col gap-1 w-full",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:e}),a.jsx("input",{type:s,...r(t),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",...l,defaultValue:i}),n?.message&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:n.message.toString()})]})},98307:(e,s,r)=>{r.r(s),r.d(s,{default:()=>b});var a=r(10326),t=r(74064),i=r(74723),n=r(76224),o=r(46226),l=r(17577),d=r(8570),m=r(60962),c=r(3682),u=r(35047),g=r(11439),p=r(30071);let b=({type:e,data:s,setOpen:r,relatedData:b})=>{let{register:z,handleSubmit:x,formState:{errors:h}}=(0,i.cI)({resolver:(0,t.F)(d.iQ)}),[f,j]=(0,l.useState)(!1),[q,y]=(0,l.useState)(),[w,N]=(0,l.useState)(),[v,T]=(0,m.useFormState)("create"===e?c.Y7:c.Jn,{success:!1,error:null}),I=x(s=>{j(!0),T({...s,img:w&&"update"===e?w:q?.secure_url})}),P=(0,u.useRouter)();(0,l.useEffect)(()=>{v.success&&(j(!1),g.Am.success(`Teacher has been ${"create"===e?"created":"updated"}!`),r(!1),P.refresh()),v.error&&(j(!1),g.Am.error(v.error))},[v,P,e,r]),(0,l.useEffect)(()=>{s&&N(s.img)});let{subjects:A}=b;return(0,a.jsxs)("form",{className:"flex flex-col gap-6 p-6 bg-white rounded-lg shadow-md max-h-[80vh] overflow-y-auto scrollbar-thin",onSubmit:I,children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"create"===e?"Create a New Teacher":"Update Teacher"}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Authentication Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsx(n.Z,{label:"Username",name:"username",defaultValue:s?.username,register:z,error:h?.username}),a.jsx(n.Z,{label:"Email",name:"email",defaultValue:s?.email,register:z,error:h?.email}),a.jsx(n.Z,{label:"Password",name:"password",type:"password",defaultValue:s?.password,register:z,error:h?.password})]})]}),a.jsx(p.ZF,{uploadPreset:"school",onSuccess:(e,{widget:s})=>{y(e.info),s.close()},children:({open:e})=>(0,a.jsxs)("div",{className:"flex flex-col gap-2 cursor-pointer",onClick:()=>e(),children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Profile Photo"}),a.jsx("div",{className:"w-full h-32 bg-gray-100 rounded-md flex items-center justify-center overflow-hidden",children:w||q?a.jsx(o.default,{src:w||q.secure_url,alt:"Uploaded",width:120,height:120,className:"object-cover"}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(o.default,{src:"/upload.png",alt:"Upload",width:28,height:28}),a.jsx("span",{className:"text-xs text-gray-500",children:"Upload a photo"})]})})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Personal Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsx(n.Z,{label:"First Name",name:"name",defaultValue:s?.name,register:z,error:h.name}),a.jsx(n.Z,{label:"Last Name",name:"surname",defaultValue:s?.surname,register:z,error:h.surname}),a.jsx(n.Z,{label:"Phone",name:"phone",defaultValue:s?.phone,register:z,error:h.phone}),a.jsx(n.Z,{label:"Address",name:"address",defaultValue:s?.address,register:z,error:h.address}),a.jsx(n.Z,{label:"Blood Type",name:"bloodType",defaultValue:s?.bloodType,register:z,error:h.bloodType}),a.jsx(n.Z,{label:"Birthday",name:"birthday",defaultValue:s?.birthday?.toISOString().split("T")[0],register:z,error:h.birthday,type:"date"}),s&&a.jsx(n.Z,{label:"Id",name:"id",defaultValue:s?.id,register:z,error:h?.id,hidden:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Additional Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Sex"}),(0,a.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",...z("sex"),defaultValue:s?.sex,children:[a.jsx("option",{value:"MALE",children:"Male"}),a.jsx("option",{value:"FEMALE",children:"Female"})]}),h.sex?.message&&a.jsx("p",{className:"text-xs text-red-500",children:h.sex.message.toString()})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Subjects"}),a.jsx("select",{multiple:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 scrollbar-thin",...z("subjects"),defaultValue:s?.subjects,children:A.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))}),h.subjects?.message&&a.jsx("p",{className:"text-xs text-red-500",children:h.subjects.message.toString()})]})]})]}),v.error&&a.jsx("div",{className:"text-red-500 text-sm mt-4",children:v.error}),a.jsx("button",{className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors disabled:bg-blue-300",type:"submit",disabled:f,children:f?"Loading...":"create"===e?"Create":"Update"})]})}},8570:(e,s,r)=>{r.d(s,{O7:()=>z,ON:()=>c,Q1:()=>o,Qu:()=>l,Rj:()=>x,UQ:()=>i,Xj:()=>d,a2:()=>u,aD:()=>h,iQ:()=>n,k:()=>b,o6:()=>p,qJ:()=>t,rA:()=>m,zi:()=>g});var a=r(27256);let t=a.z.object({id:a.z.coerce.number().optional(),name:a.z.string().min(1,{message:"Subject name is required!"}),teachers:a.z.array(a.z.string())}),i=a.z.object({id:a.z.coerce.number().optional(),name:a.z.string().min(1,{message:"Subject name is required!"}),capacity:a.z.coerce.number().min(1,{message:"Capacity name is required!"}),gradeId:a.z.coerce.number().min(1,{message:"Grade name is required!"}),supervisorId:a.z.coerce.string().optional()}),n=a.z.object({id:a.z.string().optional(),username:a.z.string().min(10,{message:"Username must be at least 10 characters long!"}),password:a.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(a.z.literal("")),name:a.z.string().min(1,{message:"First name is required!"}),surname:a.z.string().min(1,{message:"Last name is required!"}),email:a.z.string().email({message:"Invalid email address!"}).optional().or(a.z.literal("")),phone:a.z.string().optional(),address:a.z.string(),img:a.z.string().optional(),bloodType:a.z.string().min(1,{message:"Blood Type is required!"}),birthday:a.z.coerce.date({message:"Birthday is required!"}),sex:a.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),subjects:a.z.array(a.z.string()).optional()}),o=a.z.object({id:a.z.string().optional(),username:a.z.string().min(10,{message:"Username must be at least 10 characters long!"}),password:a.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(a.z.literal("")),name:a.z.string().min(1,{message:"First name is required!"}),surname:a.z.string().min(1,{message:"Last name is required!"}),email:a.z.string().email({message:"Invalid email address!"}).optional().or(a.z.literal("")),phone:a.z.string().optional(),address:a.z.string(),img:a.z.string().optional(),bloodType:a.z.string().min(1,{message:"Blood Type is required!"}),birthday:a.z.coerce.date({message:"Birthday is required!"}),sex:a.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),gradeId:a.z.coerce.number().min(1,{message:"Grade is required!"}),classId:a.z.coerce.number().min(1,{message:"Class is required!"}),parentId:a.z.string().min(1,{message:"Parent Id is required!"})}),l=a.z.object({id:a.z.coerce.number().optional(),title:a.z.string().min(1,{message:"Title name is required!"}),startTime:a.z.coerce.date({message:"Start time is required!"}),endTime:a.z.coerce.date({message:"End time is required!"}),lessonId:a.z.coerce.number({message:"Lesson is required!"})}),d=a.z.object({id:a.z.string().optional(),username:a.z.string().min(10,{message:"Username must be at least 10 characters long!"}),password:a.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(a.z.literal("")),name:a.z.string().min(1,{message:"First name is required!"}),surname:a.z.string().min(1,{message:"Last name is required!"}),email:a.z.string().email({message:"Invalid email address!"}).optional().or(a.z.literal("")),phone:a.z.string().min(10,{message:"Phone number must be at least 10 digits long!"}).max(15,{message:"Phone number must be at most 15 digits long!"}),address:a.z.string().min(1,{message:"Address is required!"})}),m=a.z.object({id:a.z.coerce.number().optional(),title:a.z.string().min(1,{message:"Title is required!"}),description:a.z.string().min(1,{message:"Description is required!"}),startTime:a.z.coerce.date({message:"Start time is required!"}),endTime:a.z.coerce.date({message:"End time is required!"}),classId:a.z.coerce.number().optional()}).refine(e=>e.endTime>e.startTime,{message:"End time must be after start time!",path:["endTime"]}),c=a.z.object({id:a.z.coerce.number().optional(),name:a.z.string().min(1,{message:"Lesson name is required!"}),day:a.z.string().optional(),startTime:a.z.coerce.date({message:"Start time is required!"}),endTime:a.z.coerce.date({message:"End time is required!"}),subjectId:a.z.coerce.number().min(1,{message:"Subject ID is required!"}),classId:a.z.coerce.number().min(1,{message:"Class ID is required!"}),teacherId:a.z.string().optional()}).refine(e=>e.endTime>e.startTime,{message:"End time must be after start time!",path:["endTime"]}),u=a.z.object({id:a.z.string().optional(),username:a.z.string().min(1,{message:"Username is required!"}).max(50,{message:"Username must be at most 50 characters long!"}),firstName:a.z.string().min(1,{message:"First name is required!"}),surname:a.z.string().min(1,{message:"Last name is required!"}),password:a.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(a.z.literal(""))}),g=a.z.object({id:a.z.coerce.number().optional(),title:a.z.string().min(1,{message:"Title is required!"}),description:a.z.string().min(1,{message:"Description is required!"}),date:a.z.coerce.date({message:"Date is required!"}),classId:a.z.coerce.number().optional()}),p=a.z.object({id:a.z.coerce.number().optional(),level:a.z.coerce.number().min(1,{message:"Grade level is required!"}).refine(e=>Number.isInteger(e),{message:"Grade level must be an integer!"}),createdAt:a.z.coerce.date().optional(),updatedAt:a.z.coerce.date().optional()}),b=a.z.object({id:a.z.coerce.number().optional(),title:a.z.string().min(1,{message:"Title is required!"}),startDate:a.z.coerce.date({message:"Start date is required!"}),dueDate:a.z.coerce.date({message:"Due date is required!"}),lessonId:a.z.coerce.number().min(1,{message:"Lesson ID is required!"}),createdAt:a.z.coerce.date().optional(),updatedAt:a.z.coerce.date().optional()}).refine(e=>e.dueDate>e.startDate,{message:"Due date must be after start date!",path:["dueDate"]}),z=a.z.object({id:a.z.coerce.number().optional(),score:a.z.coerce.number().min(0,{message:"Score must be a non-negative number!"}),examId:a.z.coerce.number().optional(),assignmentId:a.z.coerce.number().optional(),studentId:a.z.string().min(1,{message:"Student ID is required!"}),createdAt:a.z.coerce.date().optional(),updatedAt:a.z.coerce.date().optional()}),x=a.z.object({id:a.z.coerce.number().optional(),title:a.z.string().min(1,{message:"Post Title required!"}),description:a.z.string().min(1,{message:"Post description required!"}),image:a.z.string().optional(),createdAt:a.z.coerce.date().optional(),updatedAt:a.z.coerce.date().optional()}),h=a.z.object({id:a.z.coerce.number().optional(),title:a.z.string().min(1,{message:"Title required!"}).max(100,{message:"Title must be less than 100 characters!"}),file:a.z.string().optional()})}};