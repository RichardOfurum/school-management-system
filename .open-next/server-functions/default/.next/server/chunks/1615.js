"use strict";exports.id=1615,exports.ids=[1615],exports.modules={76224:(e,s,t)=>{t.d(s,{Z:()=>a});var r=t(10326);let a=({label:e,type:s="text",register:t,name:a,defaultValue:i,error:n,hidden:o,inputProps:m})=>(0,r.jsxs)("div",{className:o?"hidden":"flex flex-col gap-1 w-full",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:e}),r.jsx("input",{type:s,...t(a),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",...m,defaultValue:i}),n?.message&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:n.message.toString()})]})},61615:(e,s,t)=>{t.r(s),t.d(s,{default:()=>z});var r=t(10326),a=t(74064),i=t(74723),n=t(76224),o=t(46226),m=t(17577),d=t(8570),l=t(60962),c=t(3682),u=t(35047),g=t(11439),p=t(30071);let z=({type:e,data:s,setOpen:t})=>{let{register:z,handleSubmit:b,setValue:h,formState:{errors:x}}=(0,i.cI)({resolver:(0,a.F)(d.Rj),defaultValues:{title:s?.title||"",description:s?.description||"",image:s?.image||""}}),[f,q]=(0,m.useState)(!1),[j,w]=(0,m.useState)(),[y,I]=(0,m.useState)(s?.image||""),[P,v]=(0,l.useFormState)("create"===e?c.qb:c.CP,{success:!1,error:null}),N=b(t=>{try{q(!0);let r=new FormData;r.append("title",t.title),r.append("description",t.description),r.append("image",j?.secure_url||y),"update"===e&&s?.id&&r.append("id",s.id.toString()),v(r)}catch(e){q(!1),g.Am.error("Something went wrong, please try again!")}}),T=(0,u.useRouter)();return(0,m.useEffect)(()=>{P.success&&(q(!1),g.Am.success(`Post has been ${"create"===e?"created":"updated"}!`),t(!1),T.refresh()),P.error&&(q(!1),g.Am.error(P.error))},[P,T,e,t]),(0,m.useEffect)(()=>{s&&(h("title",s.title),h("description",s.description),I(s.image))},[s,h]),(0,r.jsxs)("form",{className:"flex flex-col gap-6 p-6 bg-white rounded-lg shadow-md max-h-[80vh] overflow-y-auto scrollbar-thin",onSubmit:N,children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"create"===e?"Create a New Post":"Update Post"}),r.jsx("div",{className:"space-y-4",children:r.jsx(n.Z,{label:"Title",name:"title",defaultValue:s?.title,register:z,error:x?.title})}),r.jsx("div",{className:"space-y-4",children:r.jsx(p.ZF,{uploadPreset:"school",onSuccess:(e,{widget:s})=>{w(e.info),I(""),s.close()},children:({open:e})=>(0,r.jsxs)("div",{className:"flex flex-col gap-2 cursor-pointer",onClick:()=>e(),children:[r.jsx("label",{className:"text-xs text-gray-500",children:"Post Image"}),r.jsx("div",{className:"w-full h-32 bg-gray-100 rounded-md flex items-center justify-center overflow-hidden",children:j?.secure_url||y?r.jsx(o.default,{src:j?.secure_url||y,alt:"Uploaded",width:120,height:120,className:"object-cover"}):(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(o.default,{src:"/upload.png",alt:"Upload",width:28,height:28}),r.jsx("span",{className:"text-xs text-gray-500",children:"Upload an image"})]})})]})})}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),r.jsx("textarea",{...z("description"),defaultValue:s?.description,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:5,placeholder:"Enter post description..."}),x.description?.message&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:x.description.message.toString()})]}),s&&r.jsx(n.Z,{label:"Id",name:"id",defaultValue:s?.id,register:z,error:x?.id,hidden:!0}),P.error&&r.jsx("div",{className:"text-red-500 text-sm mt-4",children:P.error}),r.jsx("button",{className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors disabled:bg-blue-300",type:"submit",disabled:f,children:f?"Loading...":"create"===e?"Create":"Update"})]})}},8570:(e,s,t)=>{t.d(s,{O7:()=>b,ON:()=>c,Q1:()=>o,Qu:()=>m,Rj:()=>h,UQ:()=>i,Xj:()=>d,a2:()=>u,aD:()=>x,iQ:()=>n,k:()=>z,o6:()=>p,qJ:()=>a,rA:()=>l,zi:()=>g});var r=t(27256);let a=r.z.object({id:r.z.coerce.number().optional(),name:r.z.string().min(1,{message:"Subject name is required!"}),teachers:r.z.array(r.z.string())}),i=r.z.object({id:r.z.coerce.number().optional(),name:r.z.string().min(1,{message:"Subject name is required!"}),capacity:r.z.coerce.number().min(1,{message:"Capacity name is required!"}),gradeId:r.z.coerce.number().min(1,{message:"Grade name is required!"}),supervisorId:r.z.coerce.string().optional()}),n=r.z.object({id:r.z.string().optional(),username:r.z.string().min(10,{message:"Username must be at least 10 characters long!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(r.z.literal("")),name:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),email:r.z.string().email({message:"Invalid email address!"}).optional().or(r.z.literal("")),phone:r.z.string().optional(),address:r.z.string(),img:r.z.string().optional(),bloodType:r.z.string().min(1,{message:"Blood Type is required!"}),birthday:r.z.coerce.date({message:"Birthday is required!"}),sex:r.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),subjects:r.z.array(r.z.string()).optional()}),o=r.z.object({id:r.z.string().optional(),username:r.z.string().min(10,{message:"Username must be at least 10 characters long!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(r.z.literal("")),name:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),email:r.z.string().email({message:"Invalid email address!"}).optional().or(r.z.literal("")),phone:r.z.string().optional(),address:r.z.string(),img:r.z.string().optional(),bloodType:r.z.string().min(1,{message:"Blood Type is required!"}),birthday:r.z.coerce.date({message:"Birthday is required!"}),sex:r.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),gradeId:r.z.coerce.number().min(1,{message:"Grade is required!"}),classId:r.z.coerce.number().min(1,{message:"Class is required!"}),parentId:r.z.string().min(1,{message:"Parent Id is required!"})}),m=r.z.object({id:r.z.coerce.number().optional(),title:r.z.string().min(1,{message:"Title name is required!"}),startTime:r.z.coerce.date({message:"Start time is required!"}),endTime:r.z.coerce.date({message:"End time is required!"}),lessonId:r.z.coerce.number({message:"Lesson is required!"})}),d=r.z.object({id:r.z.string().optional(),username:r.z.string().min(10,{message:"Username must be at least 10 characters long!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(r.z.literal("")),name:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),email:r.z.string().email({message:"Invalid email address!"}).optional().or(r.z.literal("")),phone:r.z.string().min(10,{message:"Phone number must be at least 10 digits long!"}).max(15,{message:"Phone number must be at most 15 digits long!"}),address:r.z.string().min(1,{message:"Address is required!"})}),l=r.z.object({id:r.z.coerce.number().optional(),title:r.z.string().min(1,{message:"Title is required!"}),description:r.z.string().min(1,{message:"Description is required!"}),startTime:r.z.coerce.date({message:"Start time is required!"}),endTime:r.z.coerce.date({message:"End time is required!"}),classId:r.z.coerce.number().optional()}).refine(e=>e.endTime>e.startTime,{message:"End time must be after start time!",path:["endTime"]}),c=r.z.object({id:r.z.coerce.number().optional(),name:r.z.string().min(1,{message:"Lesson name is required!"}),day:r.z.string().optional(),startTime:r.z.coerce.date({message:"Start time is required!"}),endTime:r.z.coerce.date({message:"End time is required!"}),subjectId:r.z.coerce.number().min(1,{message:"Subject ID is required!"}),classId:r.z.coerce.number().min(1,{message:"Class ID is required!"}),teacherId:r.z.string().optional()}).refine(e=>e.endTime>e.startTime,{message:"End time must be after start time!",path:["endTime"]}),u=r.z.object({id:r.z.string().optional(),username:r.z.string().min(1,{message:"Username is required!"}).max(50,{message:"Username must be at most 50 characters long!"}),firstName:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(r.z.literal(""))}),g=r.z.object({id:r.z.coerce.number().optional(),title:r.z.string().min(1,{message:"Title is required!"}),description:r.z.string().min(1,{message:"Description is required!"}),date:r.z.coerce.date({message:"Date is required!"}),classId:r.z.coerce.number().optional()}),p=r.z.object({id:r.z.coerce.number().optional(),level:r.z.coerce.number().min(1,{message:"Grade level is required!"}).refine(e=>Number.isInteger(e),{message:"Grade level must be an integer!"}),createdAt:r.z.coerce.date().optional(),updatedAt:r.z.coerce.date().optional()}),z=r.z.object({id:r.z.coerce.number().optional(),title:r.z.string().min(1,{message:"Title is required!"}),startDate:r.z.coerce.date({message:"Start date is required!"}),dueDate:r.z.coerce.date({message:"Due date is required!"}),lessonId:r.z.coerce.number().min(1,{message:"Lesson ID is required!"}),createdAt:r.z.coerce.date().optional(),updatedAt:r.z.coerce.date().optional()}).refine(e=>e.dueDate>e.startDate,{message:"Due date must be after start date!",path:["dueDate"]}),b=r.z.object({id:r.z.coerce.number().optional(),score:r.z.coerce.number().min(0,{message:"Score must be a non-negative number!"}),examId:r.z.coerce.number().optional(),assignmentId:r.z.coerce.number().optional(),studentId:r.z.string().min(1,{message:"Student ID is required!"}),createdAt:r.z.coerce.date().optional(),updatedAt:r.z.coerce.date().optional()}),h=r.z.object({id:r.z.coerce.number().optional(),title:r.z.string().min(1,{message:"Post Title required!"}),description:r.z.string().min(1,{message:"Post description required!"}),image:r.z.string().optional(),createdAt:r.z.coerce.date().optional(),updatedAt:r.z.coerce.date().optional()}),x=r.z.object({id:r.z.coerce.number().optional(),title:r.z.string().min(1,{message:"Title required!"}).max(100,{message:"Title must be less than 100 characters!"}),file:r.z.string().optional()})}};