"use strict";exports.id=2542,exports.ids=[2542],exports.modules={89310:(e,a,t)=>{t.d(a,{default:()=>G});var s=t(10326),n=t(3682),d=t(33265),l=t(46226),o=t(35047),r=t(17577),i=t(60962),m=t(11439);let c={subject:n.Pl,class:n.ZB,teacher:n.Q2,student:n.MA,exam:n.ZH,admin:n.jP,parent:n.Cc,lesson:n.Dv,assignment:n.CT,result:n.MV,attendance:n.Pl,event:n.Bt,announcement:n._5,grade:n.Qj,post:n.fR,prospectus:n.vz},u=(0,d.default)(()=>Promise.all([t.e(6686),t.e(71),t.e(8307)]).then(t.bind(t,98307)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/TeacherForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),p=(0,d.default)(()=>Promise.all([t.e(6686),t.e(71),t.e(5558)]).then(t.bind(t,85558)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/StudentForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),h=(0,d.default)(()=>Promise.all([t.e(6686),t.e(81)]).then(t.bind(t,40081)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/SubjectForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),x=(0,d.default)(()=>Promise.all([t.e(6686),t.e(2793)]).then(t.bind(t,62793)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/ClassForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),f=(0,d.default)(()=>Promise.all([t.e(6686),t.e(5797)]).then(t.bind(t,85797)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/ExamForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),b=(0,d.default)(()=>Promise.all([t.e(6686),t.e(4134)]).then(t.bind(t,14134)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/ParentForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),g=(0,d.default)(()=>Promise.all([t.e(6686),t.e(38)]).then(t.bind(t,10038)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/EventForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),j=(0,d.default)(()=>Promise.all([t.e(6686),t.e(4935)]).then(t.bind(t,14935)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/LessonForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),y=(0,d.default)(()=>Promise.all([t.e(6686),t.e(1881)]).then(t.bind(t,71881)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/AdminForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),w=(0,d.default)(()=>Promise.all([t.e(6686),t.e(7107)]).then(t.bind(t,47107)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/AnnouncementForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),F=(0,d.default)(()=>Promise.all([t.e(6686),t.e(6232)]).then(t.bind(t,26232)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/GradeForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),M=(0,d.default)(()=>Promise.all([t.e(6686),t.e(357)]).then(t.bind(t,90357)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/AssignmentForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),P=(0,d.default)(()=>Promise.all([t.e(6686),t.e(9077)]).then(t.bind(t,29077)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/ResultForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),Z=(0,d.default)(()=>Promise.all([t.e(6686),t.e(71),t.e(1615)]).then(t.bind(t,61615)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/PostForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),v=(0,d.default)(()=>Promise.all([t.e(6686),t.e(71),t.e(4807)]).then(t.bind(t,64807)),{loadableGenerated:{modules:["components\\FormModal.tsx -> ./forms/ProspectusForm"]},loading:()=>s.jsx("h1",{children:"Loading..."})}),D={subject:(e,a,t,n)=>s.jsx(h,{type:a,data:t,setOpen:e,relatedData:n}),class:(e,a,t,n)=>s.jsx(x,{type:a,data:t,setOpen:e,relatedData:n}),teacher:(e,a,t,n)=>s.jsx(u,{type:a,data:t,setOpen:e,relatedData:n}),student:(e,a,t,n)=>s.jsx(p,{type:a,data:t,setOpen:e,relatedData:n}),exam:(e,a,t,n)=>s.jsx(f,{type:a,data:t,setOpen:e,relatedData:n}),parent:(e,a,t,n)=>s.jsx(b,{type:a,data:t,setOpen:e,relatedData:n}),event:(e,a,t,n)=>s.jsx(g,{type:a,data:t,setOpen:e,relatedData:n}),lesson:(e,a,t,n)=>s.jsx(j,{type:a,data:t,setOpen:e,relatedData:n}),admin:(e,a,t,n)=>s.jsx(y,{type:a,data:t,setOpen:e,relatedData:n}),announcement:(e,a,t,n)=>s.jsx(w,{type:a,data:t,setOpen:e,relatedData:n}),grade:(e,a,t,n)=>s.jsx(F,{type:a,data:t,setOpen:e}),assignment:(e,a,t,n)=>s.jsx(M,{type:a,data:t,setOpen:e,relatedData:n}),result:(e,a,t,n)=>s.jsx(P,{type:a,data:t,setOpen:e,relatedData:n}),post:(e,a,t,n)=>s.jsx(Z,{type:a,data:t,setOpen:e}),prospectus:(e,a,t,n)=>s.jsx(v,{type:a,data:t,setOpen:e})},G=({table:e,type:a,data:t,id:n,relatedData:d})=>{let u="create"===a?"w-8 h-8":"w-7 h-7",p="create"===a?"bg-lamaYellow":"update"===a?"bg-lamaSky":"bg-lamaPurple",[h,x]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{className:`${u} flex items-center justify-center rounded-full ${p}`,onClick:()=>x(!0),children:s.jsx(l.default,{src:`/${a}.png`,alt:"",width:16,height:16})}),h&&s.jsx("div",{className:"w-screen h-screen absolute left-0 top-0 bg-black bg-opacity-60 z-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white p-4 rounded-md relative w-[90%] md:w-[70%] lg:w-[60%] xl:w-[50%] 2xl:w-[40%]",children:[s.jsx(()=>{let[l,u]=(0,i.useFormState)(c[e],{success:!1,error:!1}),p=(0,o.useRouter)();return(0,r.useEffect)(()=>{if(l.success){b(!1),(0,m.Am)(`${e} has been deleted!`),x(!1),p.refresh();return}l.error&&(b(!1),m.Am.error(l.error)),b(!1)},[l,p]),"delete"===a&&n?(0,s.jsxs)("form",{action:u,className:"p-4 flex flex-col gap-4",children:[s.jsx("input",{type:"text | number",name:"id",value:n,hidden:!0}),(0,s.jsxs)("span",{className:"text-center font-medium",children:["All data will be lost. Are you sure you want to delete this ",e,"?"]}),s.jsx("button",{className:`${f?"bg-red-400":"bg-red-700"} text-white py-2 px-4 rounded-md border-none w-max self-center`,children:f?"Deleting...":"Delete"})]}):"create"===a||"update"===a?D[e](x,a,t,d):"Form not found!"},{}),s.jsx("div",{className:"absolute top-4 right-4 cursor-pointer",onClick:()=>x(!1),children:s.jsx(l.default,{src:"/close.png",alt:"",width:14,height:14})})]})})]})}},35463:(e,a,t)=>{t.d(a,{Z:()=>c});var s=t(19510),n=t(13538),d=t(68570);let l=(0,d.createProxy)(String.raw`C:\nextjs_projects\2024\work\school-management-system-app\src\components\FormModal.tsx`),{__esModule:o,$$typeof:r}=l;l.default;let i=(0,d.createProxy)(String.raw`C:\nextjs_projects\2024\work\school-management-system-app\src\components\FormModal.tsx#default`);var m=t(92700);let c=async({table:e,type:a,data:t,id:d})=>{let l={},{userId:o,sessionClaims:r}=await (0,m.I)(),c=r?.metadata?.role;if("delete"!==a)switch(e){case"admin":case"parent":case"grade":case"post":case"prospectus":default:l={};break;case"subject":l={teachers:await n.Z.teacher.findMany({select:{id:!0,name:!0,surname:!0}})};break;case"class":let u=await n.Z.grade.findMany({select:{id:!0,level:!0}});l={teachers:await n.Z.teacher.findMany({select:{id:!0,name:!0,surname:!0}}),grades:u};break;case"teacher":l={subjects:await n.Z.subject.findMany({select:{id:!0,name:!0}})};break;case"student":let p=await n.Z.grade.findMany({select:{id:!0,level:!0}});l={classes:await n.Z.class.findMany({include:{_count:{select:{students:!0}}}}),grades:p,parents:await n.Z.parent.findMany({select:{id:!0,name:!0,surname:!0}})};break;case"exam":case"assignment":l={lessons:await n.Z.lesson.findMany({where:{..."teacher"===c?{teacherId:o}:{}},select:{id:!0,name:!0}})};break;case"result":l={exams:await n.Z.exam.findMany({select:{id:!0,title:!0}}),assignments:await n.Z.assignment.findMany({select:{id:!0,title:!0}}),students:await n.Z.student.findMany({select:{id:!0,name:!0,surname:!0}})};break;case"lesson":l={subjects:await n.Z.subject.findMany({select:{id:!0,name:!0}}),classes:await n.Z.class.findMany({select:{id:!0,name:!0}}),teachers:await n.Z.teacher.findMany({select:{id:!0,name:!0,surname:!0}})};break;case"event":case"announcement":l={classes:await n.Z.class.findMany({select:{id:!0,name:!0}})}}return s.jsx("div",{className:"",children:s.jsx(i,{table:e,type:a,data:t,id:d,relatedData:l})})}},13538:(e,a,t)=>{t.d(a,{Z:()=>s});let s=new(t(53524)).PrismaClient}};