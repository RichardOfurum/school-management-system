(()=>{var e={};e.id=9918,e.ids=[9918],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},8925:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>b,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d}),a(75509),a(628),a(32029),a(7629),a(35866);var s=a(23191),n=a(88716),r=a(37922),i=a.n(r),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["dashboard",{children:["backup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,75509)),"C:\\nextjs_projects\\2024\\work\\school-management-system-app\\src\\app\\dashboard\\backup\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,628)),"C:\\nextjs_projects\\2024\\work\\school-management-system-app\\src\\app\\dashboard\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,32029)),"C:\\nextjs_projects\\2024\\work\\school-management-system-app\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,7629)),"C:\\nextjs_projects\\2024\\work\\school-management-system-app\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\nextjs_projects\\2024\\work\\school-management-system-app\\src\\app\\dashboard\\backup\\page.tsx"],p="/dashboard/backup/page",b={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/dashboard/backup/page",pathname:"/dashboard/backup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},58992:(e,t,a)=>{let s={"6398820b460b9af598265b926e2e74dc834e8cec":()=>Promise.resolve().then(a.bind(a,98911)).then(e=>e.backupDatabase),bb6d38ce6d9240cb1a8de22737000b7e497b3143:()=>Promise.resolve().then(a.bind(a,68652)).then(e=>e.createOrReadKeylessAction),f54e629af6ec16b1c591c8d07d1b74cff7ef0208:()=>Promise.resolve().then(a.bind(a,68652)).then(e=>e.syncKeylessConfigAction),"841c3c9cd41e3a5db49245c124be508256284b5a":()=>Promise.resolve().then(a.bind(a,3479)).then(e=>e.invalidateCacheAction)};async function n(e,...t){return(await s[e]()).apply(null,t)}e.exports={"6398820b460b9af598265b926e2e74dc834e8cec":n.bind(null,"6398820b460b9af598265b926e2e74dc834e8cec"),bb6d38ce6d9240cb1a8de22737000b7e497b3143:n.bind(null,"bb6d38ce6d9240cb1a8de22737000b7e497b3143"),f54e629af6ec16b1c591c8d07d1b74cff7ef0208:n.bind(null,"f54e629af6ec16b1c591c8d07d1b74cff7ef0208"),"841c3c9cd41e3a5db49245c124be508256284b5a":n.bind(null,"841c3c9cd41e3a5db49245c124be508256284b5a")}},8726:(e,t,a)=>{Promise.resolve().then(a.bind(a,40543)),Promise.resolve().then(a.bind(a,91287)),Promise.resolve().then(a.bind(a,16566)),Promise.resolve().then(a.bind(a,91721)),Promise.resolve().then(a.bind(a,96067)),Promise.resolve().then(a.bind(a,72248)),Promise.resolve().then(a.t.bind(a,92481,23)),Promise.resolve().then(a.t.bind(a,79404,23))},87950:(e,t,a)=>{Promise.resolve().then(a.bind(a,40543)),Promise.resolve().then(a.bind(a,91287)),Promise.resolve().then(a.bind(a,16566)),Promise.resolve().then(a.bind(a,91721)),Promise.resolve().then(a.bind(a,96067)),Promise.resolve().then(a.bind(a,72248)),Promise.resolve().then(a.bind(a,11439))},41790:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},16598:(e,t,a)=>{Promise.resolve().then(a.bind(a,76616))},33387:(e,t,a)=>{Promise.resolve().then(a.bind(a,16507))},76616:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(10326);a(15424);var n=(0,a(46242).$)("6398820b460b9af598265b926e2e74dc834e8cec"),r=a(17577);function i(){let[e,t]=(0,r.useState)(!1),[a,i]=(0,r.useState)(null),l=async()=>{t(!0),i(null);try{let e=await n(),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`school-database-backup-${new Date().toISOString()}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}catch(e){i(e instanceof Error?e.message:"An unknown error occurred")}finally{t(!1)}};return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Database Backup"}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("p",{className:"mb-4",children:"Click the button below to create a complete backup of the database. This will download all data as a JSON file."}),s.jsx("button",{onClick:l,disabled:e,className:`px-4 py-2 rounded-md text-white ${e?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:e?"Creating Backup...":"Backup Database"}),a&&(0,s.jsxs)("div",{className:"mt-4 p-3 bg-red-100 text-red-700 rounded-md",children:["Error: ",a]}),!a&&e&&s.jsx("div",{className:"mt-4 p-3 bg-blue-100 text-blue-700 rounded-md",children:"Preparing your backup file..."})]})]})}},16507:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(10326);a(17577);let n=()=>(0,s.jsxs)("div",{className:"w-full bg-lamaSky flex items-center justify-center h-screen flex-col gap-10",children:[s.jsx("h1",{className:"text-[50px] font-extrabold",children:"Error Loading the page."}),s.jsx("p",{className:"text-[20px] font-thin",children:"Please refresh the page"})]})},98911:(e,t,a)=>{"use strict";a.r(t),a.d(t,{backupDatabase:()=>r});var s=a(27745);a(26461);var n=a(24831);async function r(){try{let e={admins:await n.default.admin.findMany(),students:await n.default.student.findMany(),teachers:await n.default.teacher.findMany(),parents:await n.default.parent.findMany(),grades:await n.default.grade.findMany(),classes:await n.default.class.findMany(),subjects:await n.default.subject.findMany(),lessons:await n.default.lesson.findMany(),exams:await n.default.exam.findMany(),assignments:await n.default.assignment.findMany(),results:await n.default.result.findMany(),attendances:await n.default.attendance.findMany(),events:await n.default.event.findMany(),announcements:await n.default.announcement.findMany(),posts:await n.default.post.findMany()};return JSON.stringify(e,null,2)}catch(e){throw console.error("Backup failed:",e),Error("Failed to backup database")}finally{await n.default.$disconnect()}}(0,a(85723).ensureServerEntryExports)([r]),(0,s.registerServerReference)("6398820b460b9af598265b926e2e74dc834e8cec",r)},75509:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});var s=a(68570);let n=(0,s.createProxy)(String.raw`C:\nextjs_projects\2024\work\school-management-system-app\src\app\dashboard\backup\page.tsx`),{__esModule:r,$$typeof:i}=n;n.default;let l=(0,s.createProxy)(String.raw`C:\nextjs_projects\2024\work\school-management-system-app\src\app\dashboard\backup\page.tsx#default`)},628:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u,metadata:()=>b});var s=a(19510),n=a(57371),r=a(17710),i=a(11391),l=a(94989);let o=[{title:"MENU",items:[{icon:"/home.png",label:"Home",href:"/dashboard/admin",visible:["admin","teacher","student","parent"]},{icon:"/teacher.png",label:"Teachers",href:"/dashboard/list/teachers",visible:["admin","teacher"]},{icon:"/student.png",label:"Students",href:"/dashboard/list/students",visible:["admin","teacher"]},{icon:"/parent.png",label:"Parents",href:"/dashboard/list/parents",visible:["admin","teacher"]},{icon:"/subject.png",label:"Subjects",href:"/dashboard/list/subjects",visible:["admin"]},{icon:"/class.png",label:"Classes",href:"/dashboard/list/classes",visible:["admin","teacher"]},{icon:"/lesson.png",label:"Lessons",href:"/dashboard/list/lessons",visible:["admin","teacher"]},{icon:"/star.png",label:"Grades",href:"/dashboard/list/grades",visible:["admin","teacher"]},{icon:"/exam.png",label:"Exams",href:"/dashboard/list/exams",visible:["admin","teacher","student","parent"]},{icon:"/assignment.png",label:"Assignments",href:"/dashboard/list/assignments",visible:["admin","teacher","student","parent"]},{icon:"/result.png",label:"Results",href:"/dashboard/list/results",visible:["admin","teacher","student","parent"]},{icon:"/attendance.png",label:"Attendance",href:"/dashboard/list/attendance",visible:["admin","teacher","student","parent"]},{icon:"/calendar.png",label:"Events",href:"/dashboard/list/events",visible:["admin","teacher","student","parent"]},{icon:"/announcement.png",label:"Announcements",href:"/dashboard/list/announcements",visible:["admin","teacher","student","parent"]}]},{title:"OTHER",items:[{icon:"/admin.png",label:"Admin",href:"/dashboard/list/admin",visible:["admin"]},{icon:"/post.png",label:"Post",href:"/dashboard/list/post",visible:["admin"]},{icon:"/prospectus.png",label:"Prospectus",href:"/dashboard/list/prospectus",visible:["admin"]}]}],d=async()=>{let e=await (0,i.a)(),t=e?.publicMetadata.role;return s.jsx("div",{className:"mt-4 text-[12px] ",children:o.map(e=>(0,s.jsxs)("div",{className:"flex flex-col gap-2 px-4",children:[s.jsx("span",{className:"hidden lg:block text-gray-400 font-light my-4",children:e.title}),e.items.map(e=>{if(e.visible.includes(t))return(0,s.jsxs)(n.default,{href:e.href,className:"flex items-center justify-center lg:justify-start gap-4 text-gray-500 py-2 md:px-2 rounded-md hover:bg-lamaSkyLight",children:["post"===e.label?s.jsx(l.Z,{}):s.jsx(r.default,{src:e.icon,width:20,height:20,alt:e.label,className:"grayscale"}),s.jsx("span",{className:"hidden lg:block",children:e.label})]},e.label)})]},e.title))})};a(71159);var c=a(63508);let p=async()=>{let e=await (0,i.a)();return s.jsx("div",{className:"flex item center justify-between p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-6 justify-end w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs leading-3 font-medium",children:e?.firstName+" "+e?.lastName}),s.jsx("span",{className:"text-[10px] text-gray-500 text-right",children:e?.publicMetadata.role})]}),s.jsx(c.l8,{})]})})},b={title:"Ridges International School",description:"A place where education meets innovation, and students are prepared not just for exams, but for life."};function u({children:e}){return(0,s.jsxs)("div",{className:"h-screen flex",children:[(0,s.jsxs)("div",{className:"w-[14%] md:w-[8%] lg:w-[16%] xl:w-[14%] overflow-y-scroll scrollbar-thin",children:[(0,s.jsxs)(n.default,{href:"/",className:"flex items-center justify-center gap-2 lg:justify-start p-4",children:[s.jsx(r.default,{src:"/logo.png",height:30,width:30,alt:"logo"}),s.jsx("span",{className:"hidden lg:block font-bold",children:"Ridges"})]}),s.jsx(d,{})]}),(0,s.jsxs)("div",{className:"w-[86%] md:w-[92%] lg:w-[84%] xl:w-[86%] flex-1 bg-[#F7F8FA] overflow-y-scroll scrollbar-thin flex flex-col",children:[s.jsx(p,{}),e]})]})}},7629:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});var s=a(68570);let n=(0,s.createProxy)(String.raw`C:\nextjs_projects\2024\work\school-management-system-app\src\app\error.tsx`),{__esModule:r,$$typeof:i}=n;n.default;let l=(0,s.createProxy)(String.raw`C:\nextjs_projects\2024\work\school-management-system-app\src\app\error.tsx#default`)},32029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l,metadata:()=>i});var s=a(19510);a(5023);var n=a(19693),r=a(40948);a(97001);let i={title:"Ridges International School",description:"A place where education meets innovation, and students are prepared not just for exams, but for life."};function l({children:e}){return s.jsx(n.El,{children:s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{children:[e,s.jsx(r.Ix,{position:"bottom-right",theme:"dark"})]})})})}},24831:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});let s=new(a(53524)).PrismaClient},73881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(66621);let n=e=>[{type:"image/x-icon",sizes:"4267x4267",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,7238,4079,9168,7343,9039],()=>a(8925));module.exports=s})();