(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9202],{20357:function(e,t,r){"use strict";var s,n;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(88081)},88081:function(e){!function(){var t={229:function(e){var t,r,s,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c=[],m=!1,d=-1;function l(){m&&s&&(m=!1,s.length?c=s.concat(c):d=-1,c.length&&u())}function u(){if(!m){var e=o(l);m=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,m=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new g(e,t)),1!==c.length||m||o(u)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},i=!0;try{t[e](a,a.exports,s),i=!1}finally{i&&delete r[e]}return a.exports}s.ab="//";var n=s(229);e.exports=n}()},38113:function(e,t,r){"use strict";var s=r(57437);t.Z=e=>{let{label:t,type:r="text",register:n,name:a,defaultValue:i,error:o,hidden:c,inputProps:m}=e;return(0,s.jsxs)("div",{className:c?"hidden":"flex flex-col gap-1 w-full",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:t}),(0,s.jsx)("input",{type:r,...n(a),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",...m,defaultValue:i}),(null==o?void 0:o.message)&&(0,s.jsx)("p",{className:"text-xs text-red-500 mt-1",children:o.message.toString()})]})}},49942:function(e,t,r){"use strict";r.r(t);var s=r(57437),n=r(31014),a=r(2265),i=r(39343),o=r(38113),c=r(80118),m=r(31721),d=r(54887),l=r(24648),u=r(16463),g=r(5267);t.default=e=>{var t,r,p;let{type:z,data:f,setOpen:b,relatedData:h,userId:x}=e,[v,j]=(0,a.useState)(!1),{user:q}=(0,g.aF)();null==q||q.publicMetadata.role;let{register:y,handleSubmit:T,formState:{errors:w}}=(0,i.cI)({resolver:(0,n.F)(c.O7)}),[I,N]=(0,d.useFormState)("create"===z?m.xo:m.cW,{success:!1,error:!1}),S=T(e=>{j(!0),N(e)}),A=(0,u.useRouter)();(0,a.useEffect)(()=>{I.success&&(l.Am.success("Result has been ".concat("create"===z?"created":"updated","!")),A.refresh(),b(!1)),I.error&&(j(!1),l.Am.error(I.error))},[I,A,z,b]);let{exams:P,assignments:E,students:L}=h;return(0,s.jsxs)("form",{className:"flex flex-col gap-8 overflow-auto max-h-[600px] h-auto scrollbar-thin",onSubmit:S,children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:"create"===z?"Create a new result":"Update the result"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(o.Z,{label:"Score",name:"score",type:"number",defaultValue:null==f?void 0:f.score,register:y,error:null==w?void 0:w.score}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Student"}),(0,s.jsx)("select",{...y("studentId"),className:"border border-gray-300 rounded-md p-2",defaultValue:null==f?void 0:f.studentId,children:L.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," ",e.surname]},e.id))}),(null===(t=w.studentId)||void 0===t?void 0:t.message)&&(0,s.jsx)("p",{className:"text-xs text-red-400",children:w.studentId.message.toString()})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Exam"}),(0,s.jsxs)("select",{...y("examId"),className:"border border-gray-300 rounded-md p-2",defaultValue:null==f?void 0:f.examId,children:[(0,s.jsx)("option",{value:"",children:"Select an exam"}),P.map(e=>(0,s.jsx)("option",{value:e.id,children:e.title},e.id))]}),(null===(r=w.examId)||void 0===r?void 0:r.message)&&(0,s.jsx)("p",{className:"text-xs text-red-400",children:w.examId.message.toString()})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Assignment"}),(0,s.jsxs)("select",{...y("assignmentId"),className:"border border-gray-300 rounded-md p-2",defaultValue:null==f?void 0:f.assignmentId,children:[(0,s.jsx)("option",{value:"",children:"Select an assignment"}),E.map(e=>(0,s.jsx)("option",{value:e.id,children:e.title},e.id))]}),(null===(p=w.assignmentId)||void 0===p?void 0:p.message)&&(0,s.jsx)("p",{className:"text-xs text-red-400",children:w.assignmentId.message.toString()})]})]}),I.error&&(0,s.jsx)("span",{className:"text-red-500",children:"Something went wrong!"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white p-2 rounded-md disabled:opacity-50",disabled:v,children:v?"Loading...":"create"===z?"Create":"Update"})]})}},80118:function(e,t,r){"use strict";r.d(t,{O7:function(){return f},ON:function(){return l},Q1:function(){return o},Qu:function(){return c},Rj:function(){return b},UQ:function(){return a},Xj:function(){return m},a2:function(){return u},aD:function(){return h},iQ:function(){return i},k:function(){return z},o6:function(){return p},qJ:function(){return n},rA:function(){return d},zi:function(){return g}});var s=r(59772);let n=s.z.object({id:s.z.coerce.number().optional(),name:s.z.string().min(1,{message:"Subject name is required!"}),teachers:s.z.array(s.z.string())}),a=s.z.object({id:s.z.coerce.number().optional(),name:s.z.string().min(1,{message:"Subject name is required!"}),capacity:s.z.coerce.number().min(1,{message:"Capacity name is required!"}),gradeId:s.z.coerce.number().min(1,{message:"Grade name is required!"}),supervisorId:s.z.coerce.string().optional()}),i=s.z.object({id:s.z.string().optional(),username:s.z.string().min(10,{message:"Username must be at least 10 characters long!"}),password:s.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(s.z.literal("")),name:s.z.string().min(1,{message:"First name is required!"}),surname:s.z.string().min(1,{message:"Last name is required!"}),email:s.z.string().email({message:"Invalid email address!"}).optional().or(s.z.literal("")),phone:s.z.string().optional(),address:s.z.string(),img:s.z.string().optional(),bloodType:s.z.string().min(1,{message:"Blood Type is required!"}),birthday:s.z.coerce.date({message:"Birthday is required!"}),sex:s.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),subjects:s.z.array(s.z.string()).optional()}),o=s.z.object({id:s.z.string().optional(),username:s.z.string().min(10,{message:"Username must be at least 10 characters long!"}),password:s.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(s.z.literal("")),name:s.z.string().min(1,{message:"First name is required!"}),surname:s.z.string().min(1,{message:"Last name is required!"}),email:s.z.string().email({message:"Invalid email address!"}).optional().or(s.z.literal("")),phone:s.z.string().optional(),address:s.z.string(),img:s.z.string().optional(),bloodType:s.z.string().min(1,{message:"Blood Type is required!"}),birthday:s.z.coerce.date({message:"Birthday is required!"}),sex:s.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),gradeId:s.z.coerce.number().min(1,{message:"Grade is required!"}),classId:s.z.coerce.number().min(1,{message:"Class is required!"}),parentId:s.z.string().min(1,{message:"Parent Id is required!"})}),c=s.z.object({id:s.z.coerce.number().optional(),title:s.z.string().min(1,{message:"Title name is required!"}),startTime:s.z.coerce.date({message:"Start time is required!"}),endTime:s.z.coerce.date({message:"End time is required!"}),lessonId:s.z.coerce.number({message:"Lesson is required!"})}),m=s.z.object({id:s.z.string().optional(),username:s.z.string().min(10,{message:"Username must be at least 10 characters long!"}),password:s.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(s.z.literal("")),name:s.z.string().min(1,{message:"First name is required!"}),surname:s.z.string().min(1,{message:"Last name is required!"}),email:s.z.string().email({message:"Invalid email address!"}).optional().or(s.z.literal("")),phone:s.z.string().min(10,{message:"Phone number must be at least 10 digits long!"}).max(15,{message:"Phone number must be at most 15 digits long!"}),address:s.z.string().min(1,{message:"Address is required!"})}),d=s.z.object({id:s.z.coerce.number().optional(),title:s.z.string().min(1,{message:"Title is required!"}),description:s.z.string().min(1,{message:"Description is required!"}),startTime:s.z.coerce.date({message:"Start time is required!"}),endTime:s.z.coerce.date({message:"End time is required!"}),classId:s.z.coerce.number().optional()}).refine(e=>e.endTime>e.startTime,{message:"End time must be after start time!",path:["endTime"]}),l=s.z.object({id:s.z.coerce.number().optional(),name:s.z.string().min(1,{message:"Lesson name is required!"}),day:s.z.string().optional(),startTime:s.z.coerce.date({message:"Start time is required!"}),endTime:s.z.coerce.date({message:"End time is required!"}),subjectId:s.z.coerce.number().min(1,{message:"Subject ID is required!"}),classId:s.z.coerce.number().min(1,{message:"Class ID is required!"}),teacherId:s.z.string().optional()}).refine(e=>e.endTime>e.startTime,{message:"End time must be after start time!",path:["endTime"]}),u=s.z.object({id:s.z.string().optional(),username:s.z.string().min(1,{message:"Username is required!"}).max(50,{message:"Username must be at most 50 characters long!"}),firstName:s.z.string().min(1,{message:"First name is required!"}),surname:s.z.string().min(1,{message:"Last name is required!"}),password:s.z.string().min(8,{message:"Password must be at least 8 characters long!"}).refine(e=>/[A-Z]/.test(e),"Password must contain at least one capital letter!").refine(e=>/[0-9]/.test(e),"Password must contain at least one number!").refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),"Password must contain at least one special character!").optional().or(s.z.literal(""))}),g=s.z.object({id:s.z.coerce.number().optional(),title:s.z.string().min(1,{message:"Title is required!"}),description:s.z.string().min(1,{message:"Description is required!"}),date:s.z.coerce.date({message:"Date is required!"}),classId:s.z.coerce.number().optional()}),p=s.z.object({id:s.z.coerce.number().optional(),level:s.z.coerce.number().min(1,{message:"Grade level is required!"}).refine(e=>Number.isInteger(e),{message:"Grade level must be an integer!"}),createdAt:s.z.coerce.date().optional(),updatedAt:s.z.coerce.date().optional()}),z=s.z.object({id:s.z.coerce.number().optional(),title:s.z.string().min(1,{message:"Title is required!"}),startDate:s.z.coerce.date({message:"Start date is required!"}),dueDate:s.z.coerce.date({message:"Due date is required!"}),lessonId:s.z.coerce.number().min(1,{message:"Lesson ID is required!"}),createdAt:s.z.coerce.date().optional(),updatedAt:s.z.coerce.date().optional()}).refine(e=>e.dueDate>e.startDate,{message:"Due date must be after start date!",path:["dueDate"]}),f=s.z.object({id:s.z.coerce.number().optional(),score:s.z.coerce.number().min(0,{message:"Score must be a non-negative number!"}),examId:s.z.coerce.number().optional(),assignmentId:s.z.coerce.number().optional(),studentId:s.z.string().min(1,{message:"Student ID is required!"}),createdAt:s.z.coerce.date().optional(),updatedAt:s.z.coerce.date().optional()}),b=s.z.object({id:s.z.coerce.number().optional(),title:s.z.string().min(1,{message:"Post Title required!"}),description:s.z.string().min(1,{message:"Post description required!"}),image:s.z.string().optional(),createdAt:s.z.coerce.date().optional(),updatedAt:s.z.coerce.date().optional()}),h=s.z.object({id:s.z.coerce.number().optional(),title:s.z.string().min(1,{message:"Title required!"}).max(100,{message:"Title must be less than 100 characters!"}),file:s.z.string().optional()})}}]);